<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!----------------------------------------- CDN JQUERY------------------------------------------------->

        <!--
                <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
        
                <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
                <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
        -->
        <!----------------------------------------- LOCAL JQUERY ---------------------------------------------->

        <link rel="stylesheet" href="./js/libs/jquery-mobile/jquery.mobile.css" />
        <script src="./js/libs/jquery/jquery-2.2.4.js"></script>
        <script src="./js/libs/jquery-mobile/jquery.mobile.js"></script>
        <script src="./js/libs/multilanguage/lang.js"></script>

        <link rel="stylesheet" href="./css/tg-theme.css"/>
        <link rel="stylesheet" href="./css/my.css"/>
        <script src="./js/libs/myUtils.js"></script>

        <script language="javascript">
//<!-------------GLOBAL VARIABLES---------------->
            var homeUrl = "http://92.222.83.28/parent/home2.php";
            //var url = "https://www.googleapis.com/books/v1/volumes/zyTCAlFPjgYC";

            window.onload = function (e) {
                doGetHomeInfoLocal("day");
            };

            $(document).ready(function () {

            });
        </script>

        <script language="javascript">
            function ciao() {
                //window.alert("callback ciao");
            }
            function doGetHomeInfo(timeFrame) {
                //window.alert("doGetHomeInfo " + timeFrame);
                $.ajax({
                    url: homeUrl,
                    //url: 'file:///home/chris/proxy/home2.php',

                    type: 'GET',
                    crossDomain: true,
                    jsonp: 'callback',
                    jsonpCallback: 'ciao',
                    data: "time_frame=" + timeFrame,
                    dataType: 'jsonp',
                    /*  data: {
                     format: 'jsonp'
                     },*/
                    contentType: 'application/json',
                    error: function (jqXHR, textStatus, errorThrown) {
                        window.alert("error");
                        //alert("responseText=" + $.httpData(jqXHR) + " textStatus=" + textStatus + " errorThrown=" + errorThrown);

                        var jsonHomeDay = JSON.parse("{\"meta\":[],\"data\":{\"notifications\":null,\"whatsapp\":{\"count\":114,\"latests\":{\"count\":12,\"has_text\":true,\"has_image\":true,\"has_video\":true,\"has_audio\":true,\"list\":[{\"id\":\"374707453\",\"first_name\":\"Sara\",\"last_name\":\"\",\"phone_number\":\"34634932907\"},{\"id\":\"446329876\",\"first_name\":\"Martina\",\"last_name\":\"\",\"phone_number\":\"34634501533\"},{\"id\":\"733818272\",\"first_name\":\"Valentina\",\"last_name\":\"\",\"phone_number\":\"34634568032\"},{\"id\":\"1883492084\",\"first_name\":\"Alessia\",\"last_name\":\"\",\"phone_number\":\"34634248145\"},{\"id\":\"1373938670\",\"is_group\":true,\"title\":\"Home\"}]},\"increase\":{\"list\":[{\"id\":\"1249076410\",\"first_name\":\"Francesca\",\"last_name\":\"\",\"phone_number\":\"34634379805\"},{\"id\":\"1673278242\",\"first_name\":\"Federica\",\"last_name\":\"\",\"phone_number\":\"34634118632\"},{\"id\":\"374707453\",\"first_name\":\"Sara\",\"last_name\":\"\",\"phone_number\":\"34634493031\"},{\"id\":\"1467554728\",\"is_group\":true,\"title\":\"Piano\"},{\"id\":\"1320340042\",\"is_group\":true,\"title\":\"Bar\"},{\"id\":\"2117263245\",\"is_group\":true,\"title\":\"School\"}]},\"nude\":{\"count\":2}},\"photo\":{\"count\":88,\"has_image\":true,\"has_video\":true,\"places\":{\"count\":3,\"list\":[{\"id\":\"1\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"Arona\"},{\"id\":\"3\",\"name\":\"aaaaaaaaaaaaaaa\"}]},\"nude\":{\"count\":2}},\"visit\":{\"count\":85,\"places\":{\"count\":23,\"list\":[{\"id\":\"2\",\"name\":\"LosAngeles\"},{\"id\":\"1\",\"name\":\"BeverlyHills\"},{\"id\":\"2\",\"name\":\"Napa\"},{\"id\":\"1\",\"name\":\"PaloAlto\"},{\"id\":\"1\",\"name\":\"MountainView\"},{\"id\":\"2\",\"name\":\"LasVegas\"},{\"id\":\"2\",\"name\":\"Seattle\"},{\"id\":\"2\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"PlayaParaiso\"},{\"id\":\"1\",\"name\":\"CallaoSalvaje\"}]}},\"geofence\":{\"count\":32,\"geofences\":[{\"id\":\"Lincontro\",\"name\":\"RistoranteL'Incontro\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":6,\"start\":\"1156\",\"stop\":\"2126\",\"count\":3},{\"id\":\"Ale\",\"name\":\"Ale\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":2,\"start\":\"0455\",\"stop\":\"2012\",\"count\":7},{\"id\":\"SiamMall\",\"name\":\"CentroComercialSiamMall\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":105,\"start\":\"1043\",\"stop\":\"2312\",\"count\":5},{\"id\":\"Michele\",\"name\":\"UfficiodiMichele\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":76,\"start\":\"0810\",\"stop\":\"2135\",\"count\":2}]}},\"pagination\":{\"eof\":true}}");
                        var jsonHomeWeek = JSON.parse("{\"meta\":[],\"data\":{\"notifications\":null,\"whatsapp\":{\"count\":119,\"latests\":{\"count\":18,\"has_text\":true,\"has_image\":true,\"has_video\":true,\"has_audio\":true,\"list\":[{\"id\":\"777950004\",\"first_name\":\"Claudia\",\"last_name\":\"\",\"phone_number\":\"34634724240\"},{\"id\":\"1842796096\",\"first_name\":\"Beatrice\",\"last_name\":\"\",\"phone_number\":\"34634841306\"},{\"id\":\"386170735\",\"first_name\":\"Valeria\",\"last_name\":\"\",\"phone_number\":\"34634464144\"},{\"id\":\"178928522\",\"first_name\":\"Michela\",\"last_name\":\"\",\"phone_number\":\"34634467025\"},{\"id\":\"1373938670\",\"is_group\":true,\"title\":\"Home\"}]},\"increase\":{\"list\":[{\"id\":\"446329876\",\"first_name\":\"Martina\",\"last_name\":\"\",\"phone_number\":\"34634997853\"},{\"id\":\"733818272\",\"first_name\":\"Valentina\",\"last_name\":\"\",\"phone_number\":\"34634553250\"},{\"id\":\"1883492084\",\"first_name\":\"Alessia\",\"last_name\":\"\",\"phone_number\":\"34634487178\"},{\"id\":\"712328370\",\"is_group\":true,\"title\":\"Afternoon\"},{\"id\":\"1467554728\",\"is_group\":true,\"title\":\"Piano\"},{\"id\":\"1320340042\",\"is_group\":true,\"title\":\"Bar\"}]},\"nude\":{\"count\":2}},\"photo\":{\"count\":58,\"has_image\":true,\"has_video\":true,\"places\":{\"count\":3,\"list\":[{\"id\":\"1\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"Arona\"},{\"id\":\"3\",\"name\":\"aaaaaaaaaaaaaaa\"}]},\"nude\":{\"count\":2}},\"visit\":{\"count\":59,\"places\":{\"count\":27,\"list\":[{\"id\":\"1\",\"name\":\"LosAngeles\"},{\"id\":\"1\",\"name\":\"BeverlyHills\"},{\"id\":\"2\",\"name\":\"Napa\"},{\"id\":\"1\",\"name\":\"PaloAlto\"},{\"id\":\"2\",\"name\":\"MountainView\"},{\"id\":\"2\",\"name\":\"LasVegas\"},{\"id\":\"2\",\"name\":\"Seattle\"},{\"id\":\"1\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"PlayaParaiso\"},{\"id\":\"1\",\"name\":\"CallaoSalvaje\"}]}},\"geofence\":{\"count\":25,\"geofences\":[{\"id\":\"Lincontro\",\"name\":\"RistoranteL'Incontro\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":97,\"start\":\"0116\",\"stop\":\"1459\",\"count\":7},{\"id\":\"Ale\",\"name\":\"Ale\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":114,\"start\":\"0221\",\"stop\":\"1446\",\"count\":7},{\"id\":\"SiamMall\",\"name\":\"CentroComercialSiamMall\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":83,\"start\":\"0937\",\"stop\":\"2354\",\"count\":7},{\"id\":\"Michele\",\"name\":\"UfficiodiMichele\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":70,\"start\":\"0016\",\"stop\":\"1354\",\"count\":6}]}},\"pagination\":{\"eof\":true}}");
                        var jsonHomeMonth = JSON.parse("{\"meta\":[],\"data\":{\"notifications\":null,\"whatsapp\":{\"count\":187,\"latests\":{\"count\":22,\"has_text\":true,\"has_image\":true,\"has_video\":true,\"has_audio\":true,\"list\":[{\"id\":\"418289079\",\"first_name\":\"Giada\",\"last_name\":\"\",\"phone_number\":\"34634789142\"},{\"id\":\"777950004\",\"first_name\":\"Claudia\",\"last_name\":\"\",\"phone_number\":\"34634721027\"},{\"id\":\"1842796096\",\"first_name\":\"Beatrice\",\"last_name\":\"\",\"phone_number\":\"34634710733\"},{\"id\":\"386170735\",\"first_name\":\"Valeria\",\"last_name\":\"\",\"phone_number\":\"34634690446\"},{\"id\":\"1373938670\",\"is_group\":true,\"title\":\"Home\"}]},\"increase\":{\"list\":[{\"id\":\"672560819\",\"first_name\":\"Elena\",\"last_name\":\"\",\"phone_number\":\"34634215505\"},{\"id\":\"758985266\",\"first_name\":\"Laura\",\"last_name\":\"\",\"phone_number\":\"34634388474\"},{\"id\":\"1716491075\",\"first_name\":\"Alice\",\"last_name\":\"\",\"phone_number\":\"34634851556\"},{\"id\":\"575284333\",\"is_group\":true,\"title\":\"Family\"},{\"id\":\"1373938670\",\"is_group\":true,\"title\":\"Home\"},{\"id\":\"210963790\",\"is_group\":true,\"title\":\"Music\"}]},\"nude\":{\"count\":2}},\"photo\":{\"count\":55,\"has_image\":true,\"has_video\":true,\"places\":{\"count\":3,\"list\":[{\"id\":\"1\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"Arona\"},{\"id\":\"3\",\"name\":\"aaaaaaaaaaaaaaa\"}]},\"nude\":{\"count\":2}},\"visit\":{\"count\":57,\"places\":{\"count\":19,\"list\":[{\"id\":\"2\",\"name\":\"BeverlyHills\"},{\"id\":\"1\",\"name\":\"Napa\"},{\"id\":\"1\",\"name\":\"PaloAlto\"},{\"id\":\"1\",\"name\":\"MountainView\"},{\"id\":\"1\",\"name\":\"LasVegas\"},{\"id\":\"2\",\"name\":\"Seattle\"},{\"id\":\"2\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"PlayaParaiso\"},{\"id\":\"2\",\"name\":\"CallaoSalvaje\"},{\"id\":\"2\",\"name\":\"Miraverde\"}]}},\"geofence\":{\"count\":25,\"geofences\":[{\"id\":\"Lincontro\",\"name\":\"RistoranteL'Incontro\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":98,\"start\":\"0037\",\"stop\":\"1531\",\"count\":7},{\"id\":\"Ale\",\"name\":\"Ale\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":31,\"start\":\"0917\",\"stop\":\"1931\",\"count\":1},{\"id\":\"SiamMall\",\"name\":\"CentroComercialSiamMall\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":33,\"start\":\"1213\",\"stop\":\"1439\",\"count\":7},{\"id\":\"Michele\",\"name\":\"UfficiodiMichele\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":124,\"start\":\"0946\",\"stop\":\"1759\",\"count\":7}]}},\"pagination\":{\"eof\":true}}");

                        if (timeFrame == "day")
                            populateHome(jsonHomeDay);
                        if (timeFrame == "week")
                            populateHome(jsonHomeWeek);
                        if (timeFrame == "month")
                            populateHome(jsonHomeMonth);
                    },
                    success: function (data, textStatus, jqXHR) {
                        //alert("success data " + data);
                        //var jsonObject = eval('(' + data + ')');
                        populateHome(data);
                        //alert();
                    }
                });
            }

            function doGetHomeInfoLocal(timeFrame) {
                var jsonHomeDay = JSON.parse("{\"meta\":[],\"data\":{\"notifications\":null,\"whatsapp\":{\"count\":187,\"latests\":{\"count\":22,\"has_text\":true,\"has_image\":true,\"has_video\":true,\"has_audio\":true,\"list\":[{\"id\":\"418289079\",\"first_name\":\"Giada\",\"last_name\":\"\",\"phone_number\":\"34634789142\"},{\"id\":\"777950004\",\"first_name\":\"Claudia\",\"last_name\":\"\",\"phone_number\":\"34634721027\"},{\"id\":\"1842796096\",\"first_name\":\"Beatrice\",\"last_name\":\"\",\"phone_number\":\"34634710733\"},{\"id\":\"386170735\",\"first_name\":\"Valeria\",\"last_name\":\"\",\"phone_number\":\"34634690446\"},{\"id\":\"1373938670\",\"is_group\":true,\"title\":\"Home\"}]},\"increase\":{\"list\":[{\"id\":\"672560819\",\"first_name\":\"Elena\",\"last_name\":\"\",\"phone_number\":\"34634215505\"},{\"id\":\"758985266\",\"first_name\":\"Laura\",\"last_name\":\"\",\"phone_number\":\"34634388474\"},{\"id\":\"1716491075\",\"first_name\":\"Alice\",\"last_name\":\"\",\"phone_number\":\"34634851556\"},{\"id\":\"575284333\",\"is_group\":true,\"title\":\"Family\"},{\"id\":\"1373938670\",\"is_group\":true,\"title\":\"Home\"},{\"id\":\"210963790\",\"is_group\":true,\"title\":\"Music\"}]},\"nude\":{\"count\":2}},\"photo\":{\"count\":55,\"has_image\":true,\"has_video\":true,\"places\":{\"count\":3,\"list\":[{\"id\":\"1\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"Arona\"},{\"id\":\"3\",\"name\":\"aaaaaaaaaaaaaaa\"}]},\"nude\":{\"count\":2}},\"visit\":{\"count\":57,\"places\":{\"count\":19,\"list\":[{\"id\":\"2\",\"name\":\"BeverlyHills\"},{\"id\":\"1\",\"name\":\"Napa\"},{\"id\":\"1\",\"name\":\"PaloAlto\"},{\"id\":\"1\",\"name\":\"MountainView\"},{\"id\":\"1\",\"name\":\"LasVegas\"},{\"id\":\"2\",\"name\":\"Seattle\"},{\"id\":\"2\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"PlayaParaiso\"},{\"id\":\"2\",\"name\":\"CallaoSalvaje\"},{\"id\":\"2\",\"name\":\"Miraverde\"}]}},\"geofence\":{\"count\":25,\"geofences\":[{\"id\":\"Lincontro\",\"name\":\"RistoranteL'Incontro\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":98,\"start\":\"0037\",\"stop\":\"1531\",\"count\":7},{\"id\":\"Ale\",\"name\":\"Ale\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":31,\"start\":\"0917\",\"stop\":\"1931\",\"count\":1},{\"id\":\"SiamMall\",\"name\":\"CentroComercialSiamMall\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":33,\"start\":\"1213\",\"stop\":\"1439\",\"count\":7},{\"id\":\"Michele\",\"name\":\"UfficiodiMichele\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":124,\"start\":\"0946\",\"stop\":\"1759\",\"count\":7}]}},\"pagination\":{\"eof\":true}}");
                var jsonHomeWeek = JSON.parse("{\"meta\":[],\"data\":{\"notifications\":null,\"whatsapp\":{\"count\":119,\"latests\":{\"count\":18,\"has_text\":true,\"has_image\":true,\"has_video\":true,\"has_audio\":true,\"list\":[{\"id\":\"777950004\",\"first_name\":\"Claudia\",\"last_name\":\"\",\"phone_number\":\"34634724240\"},{\"id\":\"1842796096\",\"first_name\":\"Beatrice\",\"last_name\":\"\",\"phone_number\":\"34634841306\"},{\"id\":\"386170735\",\"first_name\":\"Valeria\",\"last_name\":\"\",\"phone_number\":\"34634464144\"},{\"id\":\"178928522\",\"first_name\":\"Michela\",\"last_name\":\"\",\"phone_number\":\"34634467025\"},{\"id\":\"1373938670\",\"is_group\":true,\"title\":\"Home\"}]},\"increase\":{\"list\":[{\"id\":\"446329876\",\"first_name\":\"Martina\",\"last_name\":\"\",\"phone_number\":\"34634997853\"},{\"id\":\"733818272\",\"first_name\":\"Valentina\",\"last_name\":\"\",\"phone_number\":\"34634553250\"},{\"id\":\"1883492084\",\"first_name\":\"Alessia\",\"last_name\":\"\",\"phone_number\":\"34634487178\"},{\"id\":\"712328370\",\"is_group\":true,\"title\":\"Afternoon\"},{\"id\":\"1467554728\",\"is_group\":true,\"title\":\"Piano\"},{\"id\":\"1320340042\",\"is_group\":true,\"title\":\"Bar\"}]},\"nude\":{\"count\":2}},\"photo\":{\"count\":58,\"has_image\":true,\"has_video\":true,\"places\":{\"count\":3,\"list\":[{\"id\":\"1\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"Arona\"},{\"id\":\"3\",\"name\":\"aaaaaaaaaaaaaaa\"}]},\"nude\":{\"count\":2}},\"visit\":{\"count\":59,\"places\":{\"count\":27,\"list\":[{\"id\":\"1\",\"name\":\"LosAngeles\"},{\"id\":\"1\",\"name\":\"BeverlyHills\"},{\"id\":\"2\",\"name\":\"Napa\"},{\"id\":\"1\",\"name\":\"PaloAlto\"},{\"id\":\"2\",\"name\":\"MountainView\"},{\"id\":\"2\",\"name\":\"LasVegas\"},{\"id\":\"2\",\"name\":\"Seattle\"},{\"id\":\"1\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"PlayaParaiso\"},{\"id\":\"1\",\"name\":\"CallaoSalvaje\"}]}},\"geofence\":{\"count\":25,\"geofences\":[{\"id\":\"Lincontro\",\"name\":\"RistoranteL'Incontro\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":97,\"start\":\"0116\",\"stop\":\"1459\",\"count\":7},{\"id\":\"Ale\",\"name\":\"Ale\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":114,\"start\":\"0221\",\"stop\":\"1446\",\"count\":7},{\"id\":\"SiamMall\",\"name\":\"CentroComercialSiamMall\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":83,\"start\":\"0937\",\"stop\":\"2354\",\"count\":7},{\"id\":\"Michele\",\"name\":\"UfficiodiMichele\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":70,\"start\":\"0016\",\"stop\":\"1354\",\"count\":6}]}},\"pagination\":{\"eof\":true}}");
                var jsonHomeMonth = JSON.parse("{\"meta\":[],\"data\":{\"notifications\":null,\"whatsapp\":{\"count\":187,\"latests\":{\"count\":22,\"has_text\":true,\"has_image\":true,\"has_video\":true,\"has_audio\":true,\"list\":[{\"id\":\"418289079\",\"first_name\":\"Giada\",\"last_name\":\"\",\"phone_number\":\"34634789142\"},{\"id\":\"777950004\",\"first_name\":\"Claudia\",\"last_name\":\"\",\"phone_number\":\"34634721027\"},{\"id\":\"1842796096\",\"first_name\":\"Beatrice\",\"last_name\":\"\",\"phone_number\":\"34634710733\"},{\"id\":\"386170735\",\"first_name\":\"Valeria\",\"last_name\":\"\",\"phone_number\":\"34634690446\"},{\"id\":\"1373938670\",\"is_group\":true,\"title\":\"Home\"}]},\"increase\":{\"list\":[{\"id\":\"672560819\",\"first_name\":\"Elena\",\"last_name\":\"\",\"phone_number\":\"34634215505\"},{\"id\":\"758985266\",\"first_name\":\"Laura\",\"last_name\":\"\",\"phone_number\":\"34634388474\"},{\"id\":\"1716491075\",\"first_name\":\"Alice\",\"last_name\":\"\",\"phone_number\":\"34634851556\"},{\"id\":\"575284333\",\"is_group\":true,\"title\":\"Family\"},{\"id\":\"1373938670\",\"is_group\":true,\"title\":\"Home\"},{\"id\":\"210963790\",\"is_group\":true,\"title\":\"Music\"}]},\"nude\":{\"count\":2}},\"photo\":{\"count\":55,\"has_image\":true,\"has_video\":true,\"places\":{\"count\":3,\"list\":[{\"id\":\"1\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"Arona\"},{\"id\":\"3\",\"name\":\"aaaaaaaaaaaaaaa\"}]},\"nude\":{\"count\":2}},\"visit\":{\"count\":57,\"places\":{\"count\":19,\"list\":[{\"id\":\"2\",\"name\":\"BeverlyHills\"},{\"id\":\"1\",\"name\":\"Napa\"},{\"id\":\"1\",\"name\":\"PaloAlto\"},{\"id\":\"1\",\"name\":\"MountainView\"},{\"id\":\"1\",\"name\":\"LasVegas\"},{\"id\":\"2\",\"name\":\"Seattle\"},{\"id\":\"2\",\"name\":\"Adeje\"},{\"id\":\"2\",\"name\":\"PlayaParaiso\"},{\"id\":\"2\",\"name\":\"CallaoSalvaje\"},{\"id\":\"2\",\"name\":\"Miraverde\"}]}},\"geofence\":{\"count\":25,\"geofences\":[{\"id\":\"Lincontro\",\"name\":\"RistoranteL'Incontro\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":98,\"start\":\"0037\",\"stop\":\"1531\",\"count\":7},{\"id\":\"Ale\",\"name\":\"Ale\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":31,\"start\":\"0917\",\"stop\":\"1931\",\"count\":1},{\"id\":\"SiamMall\",\"name\":\"CentroComercialSiamMall\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":33,\"start\":\"1213\",\"stop\":\"1439\",\"count\":7},{\"id\":\"Michele\",\"name\":\"UfficiodiMichele\",\"latitude\":28.120483,\"longitude\":-16.7775494,\"radius\":100,\"enter\":true,\"leave\":true,\"week\":124,\"start\":\"0946\",\"stop\":\"1759\",\"count\":7}]}},\"pagination\":{\"eof\":true}}");

                if (timeFrame == "day")
                    populateHome(jsonHomeDay);
                if (timeFrame == "week")
                    populateHome(jsonHomeWeek);
                if (timeFrame == "month")
                    populateHome(jsonHomeMonth);
            }



            function roundPlus(value) {
                return (Math.floor(value / 10)) * 10 + "+";
            }

            function buildWhatsappLatestList(jsonHome) {
                var latestAR = jsonHome.data.whatsapp.latests.list;
                var maxCount = Math.min(latestAR.length, 3);
                var firstNameSTR = "&nbsp;&nbsp;&nbsp;";
                for (i = 0; i < maxCount; i++) {
                    firstNameSTR += latestAR[i].first_name;
                    if (i < maxCount - 1) {
                        firstNameSTR += ", ";
                    } else {
                        var otherCount = jsonHome.data.whatsapp.latests.count - maxCount;
                        firstNameSTR += " and other " + otherCount;
                    }
                }
                return firstNameSTR;
            }
            
            function buildWhatsappNudeCount(jsonHome) {
                var nudeCount = jsonHome.data.whatsapp.nude.count;
                if(nudeCount == 0) return "No nudes detected";
                if(nudeCount > 0) return nudeCount + " nudes detected";
            }

            function populateHome(jsonHome) {
                var latestListSTR = buildWhatsappLatestList(jsonHome);
                var nudeSTR = buildWhatsappNudeCount(jsonHome);
                $("#whatsappSectionLabelCountId").html(roundPlus(jsonHome.data.whatsapp.count));
                $("#whatsappNudeSectionLabelCountId").html(jsonHome.data.whatsapp.nude.count);
                $("#whatsappSectionLabelLatestListId").html(latestListSTR);
                $("#whatsappNudeCountId").html(nudeSTR);
            }
        </script>

    </head>
    <body>
        <!-------------------------------HOME PAGE------------------------------------------- -->
        <div id="homePage" data-role="page">

            <div id="header" data-role="header" data-theme="a" data-position="fixed">
                <div id="headerNavbarId" data-role="navbar">
                    <ul>
                        <li><a href="javascript:doGetHomeInfoLocal('day')" data-iconshadow="false" class="ui-btn-active" >Day</a></li>
                        <li><a href="javascript:doGetHomeInfoLocal('week')" data-iconshadow="false">Week</a></li>
                        <li><a href="javascript:doGetHomeInfoLocal('month')" data-iconshadow="false">Month</a></li>
                    </ul>
                </div>
            </div>

            <div role="main"  class="ui-content">
                <form id="whatsappSectionFormId">
                    <div data-role="collapsible-set"  class='my-collapsible'>
                        <div style="float: left"><image id='whatsappIconId' src='./images/whatsappIcon.png' alt='-' style="max-width:50%;"/></div>
                        <div><label style="color: #32B92A" id='whatsappSectionLabelId' class="my-label-m">Whatsapp</label></div>
                        <!------ count ------>
                        <div style="float: left;"><label class ="my-label-s" id='whatsappSectionLabelCountId'>-</label></div>
                        <div><label class ="my-label-s"  id='whatsappSectionLabelLatestListId' >-</label></div>
                        <!------ increase ------>
                        <div style="float: left"><image id='whatsappIncreaseId' src='./images/whatsappIncrease.png' style="max-width:40%;" alt='-'/></div>
                        <div><label id='whatsappIncreaseLabelSection' class="my-label-s">Increase</label></div>
                        <div><label class ="my-label-m"  id='whatsappSectionLabelLatestListId' >[Contacts placeholder]</label></div>
                        <!------ nude ------>
                        <div style="float: left"><image id='whatsappNudeIconId' src='./images/alertNudeIcon.png' style="max-width:50%;" alt='-'/></div>
                        <div><label id='whatsappNudeSection' class="my-label-s"><b>Nude Alert</b></label></div>
                        <div><label id='whatsappNudeCountId' class="my-label-s">-</label></div>
                        <br/>
                    </div>
                </form>
                <div data-role="collapsible-set"  class='my-collapsible'>
                    <image id='photoIconId' src='./images/photoIcon.png' style="max-width:50%;" alt='-'/>
                    <label style="color: #FF4333" id='photoSection'>Photo</label>
                    <image id='photoNudeIconId' src='./images/alertNudeIcon.png' style="max-width:50%;" alt='-'/>
                    <label style="color: graytext" id='photoNudeSection'>Nude</label>
                </div>
                <div data-role="collapsible-set"  class='my-collapsible'>
                    <image id='visitIconId' src='./images/visitIcon.png' style="max-width:50%;" alt='-'/>
                    <label style="color: #00A1AC" id='visitSection'>Visit</label>
                </div>
                <div data-role="collapsible-set"  class='my-collapsible'>
                    <image id='geofenceIconId' src='./images/geofenceIcon.png' alt='-' style="max-width:50%;"/>
                    <label style="color: #FFA602" id='geofenceSection'>Geofence</label>
                </div>
            </div><!-- /content -->

            <!-------------------------------FOOTER------------------------------------------- -->
            <div data-role="footer" data-theme="a" data-position="fixed">
                <div id="footerNavbarId" data-role="navbar" >
                    <ul>
                        <li><a href="#" data-icon="phone" data-iconshadow="false" data-iconpos="notext"></a></li>
                        <li><a href="#" data-icon="camera" data-iconshadow="false"  data-iconpos="notext"></a></li>
                        <li><a href="#" data-icon="home" data-iconshadow="false"  data-iconpos="notext" class="ui-btn-active"></a></li>
                        <li><a href="#" data-icon="location" data-iconshadow="false"  data-iconpos="notext"></a></li>
                        <li><a onclick="loadGeofences()" href="#editGeofencesPage" data-icon="tag" data-iconshadow="false"  data-iconpos="notext"></a></li>
                    </ul>
                </div>
            </div>
            <!-------------------------------/FOOTER------------------------------------------- -->
        </div><!-- /page -->
        <!-------------------------------/HOME PAGE------------------------------------------- -->

    </body>
</html>
