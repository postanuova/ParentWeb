<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!----------------------------------------- CDN JQUERY------------------------------------------------->


        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />

        <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
        <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

        <!----------------------------------------- LOCAL JQUERY ---------------------------------------------->
        <!--
         <link rel="stylesheet" href="./js/libs/jquery-mobile/jquery.mobile.css" />
         <script src="./js/libs/jquery/jquery-2.2.4.js"> </script>
         <script src="./js/libs/jquery-mobile/jquery.mobile.js"> </script>
        -->
        <link rel="stylesheet" href="./css/tg-theme.css"/>
        <script src="./js/libs/myUtils.js"></script>
        <script>
            //var homeUrl = "http://92.222.83.28/parent/home2.php";
            var homeUrl = "http://92.222.83.28/child/beat.php";

            window.onload = function (e) {
                /*var jsonString = "{a:1,b:2}";
                var json = JSON.parse(jsonString);
                alert(json.a + "aaaaa" + json.b);*/
                doPost();
            };

            $(document).ready(function () {
                //console.log("document ready");
            });
            
            

            function doGetHomeInfo(timeFrame) {
                alert("connecting to " + homeUrl + "timeFrame=" + timeFrame);
                //http://92.222.83.28/parent/home2.php?time_frame=day
                $.ajax({
                    type: "get",
                    url: homeUrl,
                    dataType: 'text',
                    data: "time_frame=" + timeFrame,
                    success: function (data, textStatus, jqXHR) {
                        alert("data " + data);
                        var jsonObject = eval('(' + data + ')');
                        populateHome(jsonObject);
                    }
                });
            }

            window.receive = function (data) {
                alert("receive ww " + data.volumeInfo.title);
            };

            function doPost() {
                var url = "https://www.googleapis.com/books/v1/volumes/zyTCAlFPjgYC";

                alert("doPost");
                $.ajax({
                    url: 'http://92.222.83.28/parent/home2.php?time_frame=day',
                     //url: 'file:///home/chris/proxy/home2.php',
                     
                    type: 'GET',
                    crossDomain: true,
                    jsonp: 'callback',
                    jsonpCallback: 'receive',
                    data: {
                        format: 'jsonp'
                    },
                    contentType: 'application/json',
                    error: function (jqXHR, textStatus, errorThrown) {
                        alert("error jqXHR=" + jqXHR + " textStatus=" + textStatus + " errorThrown=" + errorThrown);
                        var responseText = $.httpData(jqXHR);
                        alert(responseText);
                    },
                    dataType: 'jsonp',
                    success: function (data) {
                        alert("success " + data);
                    }
                });
            }

          
        </script>

    </head>
    <body>
        <!-------------------------------HOME PAGE------------------------------------------- -->
        <div id="homePage" data-role="page">

            <div id="header" data-role="header" data-theme="a" data-position="fixed">
                <div id="headerNavbarId" data-role="navbar" >
                    <ul>
                        <li><a href="javascript:doGetHomeInfo('day')" data-iconshadow="false" class="ui-btn-active" >Day</a></li>
                        <li><a href="#" data-iconshadow="false">Week</a></li>
                        <li><a href="#" data-iconshadow="false">Month</a></li>
                    </ul>
                </div>
            </div>

            <div role="main" class="ui-content">
                <h1>Home Page</h1>
            </div><!-- /content -->

            <!-------------------------------FOOTER------------------------------------------- -->
            <div data-role="footer" data-theme="a" data-position="fixed">
                <div id="footerNavbarId" data-role="navbar" >
                    <ul>
                        <li><a href="#" data-icon="phone" data-iconshadow="false" data-iconpos="notext"></a></li>
                        <li><a href="#" data-icon="camera" data-iconshadow="false"  data-iconpos="notext"></a></li>
                        <li><a href="#" data-icon="home" data-iconshadow="false"  data-iconpos="notext" class="ui-btn-active"></a></li>
                        <li><a href="#" data-icon="location" data-iconshadow="false"  data-iconpos="notext"></a></li>
                        <li><a onclick="loadGeofences()" href="#editGeofencesPage" data-icon="tag" data-iconshadow="false"  data-iconpos="notext"></a></li>
                    </ul>
                </div>
            </div>
            <!-------------------------------/FOOTER------------------------------------------- -->
        </div><!-- /page -->
        <!-------------------------------/HOME PAGE------------------------------------------- -->

    </body>
</html>
